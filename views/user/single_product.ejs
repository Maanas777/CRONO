<%- include ('../partials/user-Header')%>
<style>
	.image-holder{
  width: 500px;
  position: relative;
  cursor: pointer;
  >img{
    width: 100%;
    height: auto;
    object-fit: cover;
  }
}
.image-preview{
  width: 500px;
  height: 500px;
  overflow: hidden;
  position: relative;
  >img{
    position: absolute;
    top: 0;
    left: 0;
    transform: scale(2);
    transform-origin: left top;
  }
}
.d-none{
  display: none !important;
}
.magnifiying-glass{
  width: 100px;
  height: 100px;
  border: 1px dashed black;
  position: absolute;
  top: 0;
  left: 0;
  background: rgba(0,0,0,0.2);
}
figure{
  display: inline-block;
  vertical-align: top;
}
</style>
	<%- include ('../partials/user_nav')%>
	<section class="single-product">
		<div class="container">
			<div class="row">
				<div class="col-md-6">
					<ol class="breadcrumb">
						<li><a href="index.html">Home</a></li>
						<li><a href="shop.html">Shop</a></li>
						<li class="active">Single Product</li>
					</ol>
				</div>
				<div class="col-md-6">
					<ol class="product-pagination text-right">
						<li><a href="blog-left-sidebar.html"><i class="tf-ion-ios-arrow-left"></i> Next </a></li>
						<li><a href="blog-left-sidebar.html">Preview <i class="tf-ion-ios-arrow-right"></i></a></li>
					</ol>
				</div>
			</div>
			<div class="row mt-20">
				<div class="col-md-5">
					<div class="single-product-slider">
						<div id="carousel-custom" class="carousel slide" data-ride="carousel">
							<div class="carousel-outer">
								<!-- Carousel slides -->
								<div class="carousel-inner">
									<div class="item active">
										<figure class="image-holder">
									  <img id="image" src="/<%= product.photo[0] %>" alt="" data-zoom-image="/<%= product.photo[0] %>" />
									</div>
								</figure>
								<figure class="image-preview d-none">
									<img id="image-preview" src="/<%= product.photo[0] %>" alt="" data-zoom-image="/<%= product.photo[0] %>" />
									
								</figure>
									<ol class="carousel-indicators mCustomScrollbar meartlab">
									  <% for (let i = 0; i < product.photo.length; i++) { %>
										<li data-target="#carousel-custom" data-slide-to="<%= i %>" <% if (i === 0) { %>class="active"<% } %>>
										  <img src="/<%= product.photo[i] %>" alt="" onclick="updateActiveImage(this)" />
										</li>
									  <% } %>
									</ol>
								  </div>
								  
								  <script>
									function updateActiveImage(element) {
									  // Remove the 'active' class from all the <li> elements
									  var liElements = document.querySelectorAll('.carousel-indicators li');
									  liElements.forEach(function (li) {
										li.classList.remove('active');
									  });
								  
									  // Add the 'active' class to the clicked <li> element
									  element.parentNode.classList.add('active');
								  
									  // Get the source of the clicked image
									  var imageSrc = element.getAttribute('src');
								  
									  // Set the source of the main image in the carousel
									  var mainImage = document.querySelector('.carousel-inner .item.active img');
									  mainImage.src = imageSrc;
									}
								  </script>
								  
								
								<!-- Carousel controls -->
								<a class="left carousel-control" href="#carousel-custom" data-slide="prev">
									<i class="tf-ion-ios-arrow-left"></i>
								</a>
								<a class="right carousel-control" href="#carousel-custom" data-slide="next">
									<i class="tf-ion-ios-arrow-right"></i>
								</a>
							</div>
							
							<!-- Carousel indicators -->
							<ol class="carousel-indicators mCustomScrollbar meartlab">
								<% for (let i = 0; i <= 6; i++) { %>
									<li data-target="#carousel-custom" data-slide-to="<%= i - 1 %>"<%= i === 1 ? ' class="active"' : '' %>>
										<img src="images/shop/single-products/product-<%= i %>.jpg" alt="" />
									</li>
								<% } %>
							</ol>
						</div>
					</div>
				</div>
				<div class="col-md-7">
					<div class="single-product-details">
						<h2>	<%= product.name %>
						</h2>
						<p class="product-price">
							â‚¹&nbsp;<%= product.price %>
						</p>
							Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laborum ipsum dicta quod, quia doloremque aut deserunt commodi quis. Totam a consequatur beatae nostrum, earum consequuntur? Eveniet consequatur ipsum dicta recusandae.
						
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nesciunt, velit, sunt temporibus, nulla accusamus similique sapiente tempora, at atque cumque assumenda minus asper
	, consectetur adipisicing elit. Nesciunt, velit, sunt temporibus, nulla accusamus similique sapiente tempora, at atque cumque assumenda minus asperiores est esse sequi dolore magnam. Debitis, explicabo.</p>
						<div class="color-swatches">
							<span>color:</span>
							<ul>
								<li>
									<a href="#!" class="swatch-violet"></a>
								</li>
								<li>
									<a href="#!" class="swatch-black"></a>
								</li>
								<li>
									<a href="#!" class="swatch-cream"></a>
								</li>
							</ul>
						</div>
						<!-- <div class="product-size">
							<span>Size:</span>
							<select class="form-control">
								<option>S</option>
								<option>M</option>
								<option>L</option>
								<option>XL</option>
							</select>
						</div> -->
						<!-- <div class="product-quantity">
							<span>Quantity:</span>
							<div class="product-quantity-slider">
								<input id="product-quantity" type="text" value="0" name="product-quantity">
							</div> -->
						</div>
						<!-- <div class="product-category">
							<span>Categories:</span>
							<ul>
								<li><a href="product-single.html">Products</a></li>
								<li><a href="product-single.html">Soap</a></li>
							</ul>
						</div> -->
						<div  style="margin-top: 10%;">
						<button class="btn btn-main mt-20 add-to-cart-btn " data-product-id="<%= product._id %>">Add To Cart</button>
					  </div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<div class="tabCommon mt-20">
						<ul class="nav nav-tabs">
							<li class="active"><a data-toggle="tab" href="#details" aria-expanded="true">Details</a></li>
							<li class=""><a data-toggle="tab" href="#reviews" aria-expanded="false">Reviews (3)</a></li>
						</ul>
						<div class="tab-content patternbg">
							<div id="details" class="tab-pane fade active in">
								<h4>Product Description</h4>
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut per spici</p>
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Veritatis delectus quidem repudiandae veniam distinctio repellendus magni pariatur molestiae asperiores animi, eos quod iusto hic doloremque iste a, nisi iure at unde molestias enim fugit, nulla voluptatibus. Deserunt voluptate tempora aut illum harum, deleniti laborum animi neque, praesentium explicabo, debitis ipsa?</p>
							</div>
							<div id="reviews" class="tab-pane fade">
								<div class="post-comments">
									<ul class="media-list comments-list m-bot-50 clearlist">
										<!-- Comment Item start-->
										<li class="media">
	
											<a class="pull-left" href="#!">
												<img class="media-object comment-avatar" src="images/blog/avater-1.jpg" alt="" width="50" height="50" />
											</a>
	
											<div class="media-body">
												<div class="comment-info">
													<h4 class="comment-author">
														<a href="#!">Jonathon Andrew</a>
														
													</h4>
													<time datetime="2013-04-06T13:53">July 02, 2015, at 11:34</time>
													<a class="comment-button" href="#!"><i class="tf-ion-chatbubbles"></i>Reply</a>
												</div>
	
												<p>
													Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque at magna ut ante eleifend eleifend.Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quod laborum minima, reprehenderit laboriosam officiis praesentium? Impedit minus provident assumenda quae.
												</p>
											</div>
	
										</li>
										<!-- End Comment Item -->
	
										<!-- Comment Item start-->
										<li class="media">
	
											<a class="pull-left" href="#!">
												<img class="media-object comment-avatar" src="images/blog/avater-4.jpg" alt="" width="50" height="50" />
											</a>
	
											<div class="media-body">
	
												<div class="comment-info">
													<div class="comment-author">
														<a href="#!">Jonathon Andrew</a>
													</div>
													<time datetime="2013-04-06T13:53">July 02, 2015, at 11:34</time>
													<a class="comment-button" href="#!"><i class="tf-ion-chatbubbles"></i>Reply</a>
												</div>
	
												<p>
													Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque at magna ut ante eleifend eleifend. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Magni natus, nostrum iste non delectus atque ab a accusantium optio, dolor!
												</p>
	
											</div>
	
										</li>
										<!-- End Comment Item -->
	
										<!-- Comment Item start-->
										<li class="media">
	
											<a class="pull-left" href="#!">
												<img class="media-object comment-avatar" src="images/blog/avater-1.jpg" alt="" width="50" height="50">
											</a>
	
											<div class="media-body">
	
												<div class="comment-info">
													<div class="comment-author">
														<a href="#!">Jonathon Andrew</a>
													</div>
													<time datetime="2013-04-06T13:53">July 02, 2015, at 11:34</time>
													<a class="comment-button" href="#!"><i class="tf-ion-chatbubbles"></i>Reply</a>
												</div>
	
												<p>
													Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque at magna ut ante eleifend eleifend.
												</p>
	
											</div>
	
										</li>
								</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<section class="products related-products section">
		<div class="container">
			<div class="row">
				<div class="title text-center">
					<h2>Related Products</h2>
				</div>
			</div>
			<div class="row">
				<div class="col-md-3">
					<div class="product-item">
						<div class="product-thumb">
							<span class="bage">Sale</span>
							<img class="img-responsive" src="images/shop/products/product-5.jpg" alt="product-img" />
							<div class="preview-meta">
								<ul>
									<li>
										<span  data-toggle="modal" data-target="#product-modal">
											<i class="tf-ion-ios-search"></i>
										</span>
									</li>
									<li>
										<a href="#" ><i class="tf-ion-ios-heart"></i></a>
									</li>
									<li>
										<a href="#!"><i class="tf-ion-android-cart"></i></a>
									</li>
								</ul>
							  </div>
						</div>
						<div class="product-content">
							<h4><a href="product-single.html">Reef Boardsport</a></h4>
							<p class="price">$200</p>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="product-item">
						<div class="product-thumb">
							<img class="img-responsive" src="images/shop/products/product-1.jpg" alt="product-img" />
							<div class="preview-meta">
								<ul>
									<li>
										<span  data-toggle="modal" data-target="#product-modal">
											<i class="tf-ion-ios-search-strong"></i>
										</span>
									</li>
									<li>
										<a href="#" ><i class="tf-ion-ios-heart"></i></a>
									</li>
									<li>
										<a href="#!"><i class="tf-ion-android-cart"></i></a>
									</li>
								</ul>
							  </div>
						</div>
						<div class="product-content">
							<h4><a href="product-single.html">Rainbow Shoes</a></h4>
							<p class="price">$200</p>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="product-item">
						<div class="product-thumb">
							<img class="img-responsive" src="images/shop/products/product-2.jpg" alt="product-img" />
							<div class="preview-meta">
								<ul>
									<li>
										<span  data-toggle="modal" data-target="#product-modal">
											<i class="tf-ion-ios-search"></i>
										</span>
									</li>
									<li>
										<a href="#" ><i class="tf-ion-ios-heart"></i></a>
									</li>
									<li>
										<a href="#!"><i class="tf-ion-android-cart"></i></a>
									</li>
								</ul>
							  </div>
						</div>
						<div class="product-content">
							<h4><a href="product-single.html">Strayhorn SP</a></h4>
							<p class="price">$230</p>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="product-item">
						<div class="product-thumb">
							<img class="img-responsive" src="images/shop/products/product-3.jpg" alt="product-img" />
							<div class="preview-meta">
								<ul>
									<li>
										<span  data-toggle="modal" data-target="#product-modal">
											<i class="tf-ion-ios-search"></i>
										</span>
									</li>
									<li>
										<a href="#" ><i class="tf-ion-ios-heart"></i></a>
									</li>
									<li>
										<a href="#!"><i class="tf-ion-android-cart"></i></a>
									</li>
								</ul>
							  </div>
						</div>
						<div class="product-content">
							<h4><a href="product-single.html">Bradley Mid</a></h4>
							<p class="price">$200</p>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	</section>
	
	
	
	<!-- Modal -->
	<div class="modal product-modal fade" id="product-modal">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<i class="tf-ion-close"></i>
		</button>
		  <div class="modal-dialog " role="document">
			<div class="modal-content">
				  <div class="modal-body">
					<div class="row">
						<div class="col-md-8">
							<div class="modal-image">
								<img class="img-responsive" src="images/shop/products/modal-product.jpg" />
							</div>
						</div>
						<div class="col-md-3">
							<div class="product-short-details">
								<h2 class="product-title">GM Pendant, Basalt Grey</h2>
								<p class="product-price">$200</p>
								<p class="product-short-description">
									Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rem iusto nihil cum. Illo laborum numquam rem aut officia dicta cumque.
								</p>
								<a href="#!" class="btn btn-main">Add To Cart</a>
								<a href="#!" class="btn btn-transparent">View Product Details</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		  </div>
	</div>
	
<script>
$(document).ready(function() {
  $('.add-to-cart-btn').on('click', function(event) {
    event.preventDefault();

    // Get the product ID from the data attribute
    const productId = $(this).data('product-id');

    // Make an AJAX request to add the product to the cart
    $.ajax({
      url: '/addcart/' + productId,
      method: 'GET',
      success: function(response) {
        toastr.success(response.message);
        // Handle the success response (e.g., show toaster message)
      },
      error: function(error) {
        toastr.error('An error occurred while adding the product to cart');
      }
    });
  });
});


</script>
<script>
	var holder = document.querySelector('.image-holder');
var image = document.getElementById('image');
var previewHolder = document.querySelector('.image-preview');
var imagePreview = document.getElementById('image-preview');
imagePreview.src = image.src;
holder.addEventListener('mousemove', () => {
    var magGlass = document.querySelector('.magnifiying-glass');
    let left = event.clientX - holder.offsetLeft;
    let top = event.clientY - holder.offsetTop;
    let height = image.clientHeight;
    let width = image.clientWidth;
    let previewWidth = imagePreview.clientWidth;
    let scaleValue = 2500 / previewWidth;
    imagePreview.style.transform = 'scale(' + scaleValue + ')';
    let magTop = top - 150;
    let magLeft = left - 150;
    if(magTop <= 0){
      magTop = 0;
    } 
    if(magLeft <= 0){
       magLeft = 0;
    }
    if(magLeft >= (width - 100)){
      magLeft = width - 100;
    }
    if(magTop >= (height - 100)){
       magTop = height - 100;
    }
    magGlass.style.top = magTop + 'px';
    magGlass.style.left = magLeft + 'px';
    let topPercentage = top / height * 100;
    let leftPercentage = left / width * 100;
    imagePreview.style.top = - (5 * magTop) + "px";
    imagePreview.style.left = - (5 * magLeft) + "px";
});
holder.addEventListener('mouseenter', () => {
    previewHolder.classList.remove('d-none');
    let magGlass = document.createElement("DIV");
    magGlass.className = 'magnifiying-glass';
    holder.appendChild(magGlass);
});
holder.addEventListener('mouseleave', () => {
    var magGlass = holder.querySelector('.magnifiying-glass');
    previewHolder.classList.add('d-none');
    magGlass.parentNode.removeChild(magGlass);
    imagePreview.style.top = 0;
    imagePreview.style.left = 0;
});



</script>

		<%- include ('../partials/user-Footer')%>